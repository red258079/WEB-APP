<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - H·ªá Th·ªëng Thi Tr·ª±c Tuy·∫øn</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
    <link rel="icon" type="image/png" href="/client/public/images/edu.png">
    <link href="/client/public/css/admin.css" rel="stylesheet">
    <link href="/client/public/css/scroll-to-top.css" rel="stylesheet">
</head>

<body>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4><i class="bi bi-journal-check"></i> Exam System</h4>
            <small>Qu·∫£n tr·ªã vi√™n</small>
        </div>
        <ul class="nav flex-column mt-3">
            <li class="nav-item">
                <a class="nav-link active" href="#" data-section="dashboard">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="users">
                    <i class="bi bi-people"></i> Ng∆∞·ªùi d√πng
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="exams">
                    <i class="bi bi-file-text"></i> K·ª≥ thi
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="questions">
                    <i class="bi bi-question-circle"></i> Ng√¢n h√†ng c√¢u h·ªèi
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="monitor-cheating">
                    <i class="bi bi-exclamation-triangle"></i> Gi√°m s√°t gian l·∫≠n
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#" data-section="subjects">
                    <i class="bi bi-book"></i> M√¥n h·ªçc
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="reports">
                    <i class="bi bi-graph-up"></i> B√°o c√°o & Th·ªëng k√™
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="settings">
                    <i class="bi bi-gear"></i> C√†i ƒë·∫∑t
                </a>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <div class="header">
            <div>
                <button class="btn btn-link d-md-none" id="toggleSidebar">
                    <i class="bi bi-list fs-4"></i>
                </button>
                <h5 class="mb-0 d-inline-block ms-2" id="pageTitle">Dashboard T·ªïng Quan</h5>
            </div>
            <div class="d-flex align-items-center gap-3">
                <button class="btn btn-sm btn-outline-secondary" id="toggleDarkMode"
                    title="Chuy·ªÉn ƒë·ªïi giao di·ªán s√°ng/t·ªëi">
                    <i class="bi bi-moon-fill" id="darkModeIcon"></i>
                </button>
                <div class="dropdown">
                    <button class="btn btn-sm btn-primary dropdown-toggle" type="button" id="exportReportDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-download"></i> Xu·∫•t b√°o c√°o
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="exportReportDropdown">
                        <li>
                            <a class="dropdown-item" href="#" id="headerExportExcel">
                                <i class="bi bi-file-earmark-excel text-success"></i> Xu·∫•t Excel
                            </a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#" id="headerExportPDF">
                                <i class="bi bi-file-earmark-pdf text-danger"></i> Xu·∫•t PDF
                            </a>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li>
                            <a class="dropdown-item" href="#" id="headerPrintReport">
                                <i class="bi bi-printer text-primary"></i> In b√°o c√°o
                            </a>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li>
                            <a class="dropdown-item" href="#" id="goToReportsSection">
                                <i class="bi bi-graph-up"></i> Xem b√°o c√°o chi ti·∫øt
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="user-avatar">AD</div>
            </div>
        </div>

        <div id="dashboard-section" class="content-section active">
            <div class="row g-3 mb-4">
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon primary-icon">
                            <i class="bi bi-people-fill"></i>
                        </div>
                        <div class="stat-label">T·ªïng Sinh Vi√™n</div>
                        <div class="stat-value">0</div>
                        <div class="stat-change text-success">
                            <i class="bi bi-arrow-up"></i> +12% so v·ªõi th√°ng tr∆∞·ªõc
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon success-icon">
                            <i class="bi bi-person-badge"></i>
                        </div>
                        <div class="stat-label">T·ªïng Gi√°o Vi√™n</div>
                        <div class="stat-value">0</div>
                        <div class="stat-change text-success">
                            <i class="bi bi-arrow-up"></i> +5% so v·ªõi th√°ng tr∆∞·ªõc
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon warning-icon">
                            <i class="bi bi-file-earmark-text"></i>
                        </div>
                        <div class="stat-label">K·ª≥ Thi ƒêang Di·ªÖn Ra</div>
                        <div class="stat-value">0</div>
                        <div class="stat-change text-success">
                            <i class="bi bi-arrow-up"></i> +8% so v·ªõi th√°ng tr∆∞·ªõc
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon info-icon">
                            <i class="bi bi-patch-question"></i>
                        </div>
                        <div class="stat-label">C√¢u H·ªèi Trong H·ªá Th·ªëng</div>
                        <div class="stat-value">0</div>
                        <div class="stat-change text-success">
                            <i class="bi bi-plus"></i> +156 c√¢u h·ªèi m·ªõi
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-xl-8">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">Th·ªëng K√™ Ng∆∞·ªùi D√πng M·ªõi</h6>
                            <div class="d-flex gap-2">
                                <select class="form-select form-select-sm" id="userChartType" style="width: auto;">
                                    <option value="line">ƒê∆∞·ªùng</option>
                                    <option value="bar">C·ªôt</option>
                                    <option value="area">V√πng</option>
                                </select>
                                <div class="btn-group btn-group-sm" role="group">
                                    <button type="button" class="btn btn-outline-primary active" id="studentBtn">Sinh
                                        vi√™n</button>
                                    <button type="button" class="btn btn-outline-primary" id="teacherBtn">Gi√°o
                                        vi√™n</button>
                                </div>
                            </div>
                        </div>
                        <canvas id="userChart" height="80"></canvas>
                    </div>
                </div>
                <div class="col-xl-4">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">T·ª∑ L·ªá Ho√†n Th√†nh B√†i Thi</h6>
                            <select class="form-select form-select-sm" id="completionChartType" style="width: auto;">
                                <option value="doughnut">Doughnut</option>
                                <option value="pie">Tr√≤n</option>
                                <option value="bar">C·ªôt</option>
                            </select>
                        </div>
                        <canvas id="completionChart"></canvas>
                        <div class="mt-3" id="completionStats">
                            <div class="d-flex justify-content-between mb-2">
                                <span><i class="bi bi-circle-fill text-success"></i> Ho√†n th√†nh</span>
                                <strong id="completedPercent">0%</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span><i class="bi bi-circle-fill text-warning"></i> ƒêang l√†m</span>
                                <strong id="inProgressPercent">0%</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span><i class="bi bi-circle-fill text-danger"></i> B·ªè d·ªü</span>
                                <strong id="abandonedPercent">0%</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-xl-6">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">Ph√¢n B·ªë ƒêi·ªÉm S·ªë</h6>
                            <select class="form-select form-select-sm" id="scoreChartType" style="width: auto;">
                                <option value="bar">C·ªôt</option>
                                <option value="line">ƒê∆∞·ªùng</option>
                                <option value="pie">Tr√≤n</option>
                            </select>
                        </div>
                        <canvas id="scoreChart" height="100"></canvas>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">S·ªë L∆∞·ª£ng K·ª≥ Thi Theo Th√°ng</h6>
                            <select class="form-select form-select-sm" id="examChartType" style="width: auto;">
                                <option value="bar">C·ªôt</option>
                                <option value="line">ƒê∆∞·ªùng</option>
                                <option value="area">V√πng</option>
                            </select>
                        </div>
                        <canvas id="examChart" height="100"></canvas>
                    </div>
                </div>
            </div>

            <!-- Ti·ªán √≠ch Dashboard -->
            <div class="row g-4 mb-4">
                <!-- Quick Actions -->
                <div class="col-xl-4">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">H√†nh ƒê·ªông Nhanh</h6>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary btn-sm"
                                onclick="handleQuickAction('users', 'addUserBtn')">
                                <i class="bi bi-person-plus"></i> Th√™m ng∆∞·ªùi d√πng
                            </button>
                            <button class="btn btn-outline-primary btn-sm"
                                onclick="handleQuickAction('exams', 'addExamBtn')">
                                <i class="bi bi-file-earmark-plus"></i> T·∫°o k·ª≥ thi m·ªõi
                            </button>
                            <button class="btn btn-outline-primary btn-sm"
                                onclick="handleQuickAction('questions', 'addQuestionBtn')">
                                <i class="bi bi-question-circle"></i> Th√™m c√¢u h·ªèi
                            </button>
                            <button class="btn btn-outline-primary btn-sm"
                                onclick="handleQuickAction('subjects', 'addSubjectBtn')">
                                <i class="bi bi-book"></i> Th√™m m√¥n h·ªçc
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="switchSection('reports')">
                                <i class="bi bi-graph-up"></i> Xem b√°o c√°o
                            </button>
                            <button class="btn btn-outline-warning btn-sm" onclick="switchSection('monitor-cheating')">
                                <i class="bi bi-shield-exclamation"></i> Gi√°m s√°t gian l·∫≠n
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y -->
                <div class="col-xl-4">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</h6>
                            <button class="btn btn-link btn-sm p-0" onclick="loadRecentActivities()" title="L√†m m·ªõi">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                        </div>
                        <div id="recentActivitiesList" style="max-height: 300px; overflow-y: auto;">
                            <div class="text-center text-muted py-3">
                                <div class="spinner-border spinner-border-sm" role="status">
                                    <span class="visually-hidden">ƒêang t·∫£i...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Th√¥ng b√°o quan tr·ªçng & Li√™n k·∫øt nhanh -->
                <div class="col-xl-4">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">Th√¥ng B√°o & Li√™n K·∫øt</h6>
                        <div id="importantNotifications">
                            <div class="alert alert-info alert-sm mb-2">
                                <i class="bi bi-info-circle"></i> <small>H·ªá th·ªëng ƒëang ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng</small>
                            </div>
                            <div class="alert alert-warning alert-sm mb-2" id="cheatingAlert" style="display: none;">
                                <i class="bi bi-exclamation-triangle"></i> <small>C√≥ c·∫£nh b√°o gian l·∫≠n c·∫ßn xem
                                    x√©t</small>
                            </div>
                        </div>
                        <hr>
                        <div class="d-grid gap-2">
                            <a href="#" class="btn btn-link btn-sm text-start p-2" onclick="switchSection('users')">
                                <i class="bi bi-people"></i> Qu·∫£n l√Ω ng∆∞·ªùi d√πng
                            </a>
                            <a href="#" class="btn btn-link btn-sm text-start p-2" onclick="switchSection('exams')">
                                <i class="bi bi-file-earmark-text"></i> Qu·∫£n l√Ω k·ª≥ thi
                            </a>
                            <a href="#" class="btn btn-link btn-sm text-start p-2" onclick="switchSection('questions')">
                                <i class="bi bi-patch-question"></i> Ng√¢n h√†ng c√¢u h·ªèi
                            </a>
                            <a href="#" class="btn btn-link btn-sm text-start p-2" onclick="switchSection('reports')">
                                <i class="bi bi-file-earmark-bar-graph"></i> B√°o c√°o & Th·ªëng k√™
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="users-section" class="content-section">
            <div class="table-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="chart-title mb-0">Qu·∫£n L√Ω Ng∆∞·ªùi D√πng</h6>
                    <button class="btn btn-primary" id="addUserBtn">
                        <i class="bi bi-plus-lg"></i> Th√™m ng∆∞·ªùi d√πng
                    </button>
                </div>

                <div class="row mb-3 g-2">
                    <div class="col-12 col-md-6">
                        <input type="text" class="form-control" id="userSearch"
                            placeholder="T√¨m ki·∫øm theo t√™n, email...">
                    </div>
                    <div class="col-6 col-md-3">
                        <select class="form-select" id="userRoleFilter">
                            <option value="">T·∫•t c·∫£ vai tr√≤</option>
                            <option value="Student">Sinh vi√™n</option>
                            <option value="Teacher">Gi√°o vi√™n</option>
                            <option value="Admin">Qu·∫£n tr·ªã vi√™n</option>
                        </select>
                    </div>
                    <div class="col-6 col-md-3">
                        <select class="form-select" id="userStatusFilter">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
                            <option value="inactive">Kh√¥ng ho·∫°t ƒë·ªông</option>
                        </select>
                    </div>
                </div>

                <!-- Card view for mobile -->
                <div id="usersCardView" class="d-md-none row g-3 mb-4">
                    <!-- Cards will be rendered here -->
                </div>

                <!-- Table view for desktop -->
                <div class="table-responsive d-none d-md-block">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>H·ªç v√† T√™n</th>
                                <th>Email</th>
                                <th>Vai tr√≤</th>
                                <th>Ng√†y ƒëƒÉng k√Ω</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <nav class="mt-4">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled"><a class="page-link" href="#">Tr∆∞·ªõc</a></li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                    </ul>
                </nav>
            </div>
        </div>

        <div id="exams-section" class="content-section">
            <div class="table-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="chart-title mb-0">Qu·∫£n L√Ω K·ª≥ Thi</h6>
                    <button class="btn btn-primary" id="addExamBtn">
                        <i class="bi bi-plus-lg"></i> T·∫°o k·ª≥ thi m·ªõi
                    </button>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>T√™n K·ª≥ Thi</th>
                                <th>M√¥n H·ªçc</th>
                                <th>Gi√°o Vi√™n</th>
                                <th>Th·ªùi gian</th>
                                <th>S·ªë SV</th>
                                <th>Tr·∫°ng Th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="monitor-cheating-section" class="content-section">
            <!-- Th·ªëng k√™ t·ªïng quan -->
            <div class="row g-3 mb-4">
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon danger-icon">
                            <i class="bi bi-exclamation-triangle-fill"></i>
                        </div>
                        <div class="stat-label">T·ªïng vi ph·∫°m</div>
                        <div class="stat-value" id="totalViolations">0</div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon warning-icon">
                            <i class="bi bi-people-fill"></i>
                        </div>
                        <div class="stat-label">H·ªçc sinh vi ph·∫°m</div>
                        <div class="stat-value" id="violatingStudents">0</div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon info-icon">
                            <i class="bi bi-file-earmark-text"></i>
                        </div>
                        <div class="stat-label">B√†i thi b·ªã ·∫£nh h∆∞·ªüng</div>
                        <div class="stat-value" id="affectedExams">0</div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon danger-icon">
                            <i class="bi bi-ban"></i>
                        </div>
                        <div class="stat-label">H·ªçc sinh b·ªã c·∫•m</div>
                        <div class="stat-value" id="bannedStudents">0</div>
                    </div>
                </div>
            </div>

            <!-- Bi·ªÉu ƒë·ªì v√† Top vi ph·∫°m -->
            <div class="row g-4 mb-4">
                <div class="col-xl-8">
                    <div class="chart-card">
                        <h6 class="chart-title">Th·ªëng k√™ vi ph·∫°m theo lo·∫°i</h6>
                        <canvas id="cheatingChart" height="100"></canvas>
                    </div>
                </div>
                <div class="col-xl-4">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">Top 5 h·ªçc sinh vi ph·∫°m</h6>
                        <ul id="topViolators" class="list-group list-group-flush"></ul>
                    </div>
                </div>
            </div>

            <!-- Top b√†i thi vi ph·∫°m -->
            <div class="row g-4 mb-4">
                <div class="col-12">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">Top 5 b√†i thi c√≥ nhi·ªÅu vi ph·∫°m</h6>
                        <div id="topExamsList" class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>B√†i thi</th>
                                        <th>L·ªõp</th>
                                        <th>S·ªë vi ph·∫°m</th>
                                        <th>S·ªë h·ªçc sinh vi ph·∫°m</th>
                                    </tr>
                                </thead>
                                <tbody id="topExamsBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- B·∫£ng log gian l·∫≠n -->
            <div class="table-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="chart-title mb-0">üìã Log gian l·∫≠n chi ti·∫øt</h6>
                    <div>
                        <button class="btn btn-secondary me-2" id="refreshCheatingBtn">
                            <i class="bi bi-arrow-clockwise"></i> L√†m m·ªõi
                        </button>
                        <button class="btn btn-primary" id="exportCheatingCsv">
                            <i class="bi bi-download"></i> Xu·∫•t CSV
                        </button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="form-label small">L·ªçc theo b√†i thi</label>
                        <select class="form-select" id="examFilter">
                            <option value="">T·∫•t c·∫£ k·ª≥ thi</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label small">L·ªçc theo h·ªçc sinh</label>
                        <select class="form-select" id="studentFilter">
                            <option value="">T·∫•t c·∫£ h·ªçc sinh</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">Lo·∫°i vi ph·∫°m</label>
                        <select class="form-select" id="eventTypeFilter">
                            <option value="">T·∫•t c·∫£ lo·∫°i</option>
                            <option value="TabSwitch">üö´ Chuy·ªÉn tab</option>
                            <option value="CopyPaste">üìã Copy/Paste</option>
                            <option value="WebcamSuspicious">üì∑ Webcam ƒë√°ng ng·ªù</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">T·ª´ ng√†y</label>
                        <input type="date" class="form-select" id="startDateFilter">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">ƒê·∫øn ng√†y</label>
                        <input type="date" class="form-select" id="endDateFilter">
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>H·ªçc sinh</th>
                                <th>B√†i thi</th>
                                <th>Gi√°o vi√™n</th>
                                <th>L·ªõp</th>
                                <th>Lo·∫°i vi ph·∫°m</th>
                                <th>Chi ti·∫øt</th>
                                <th>Th·ªùi gian</th>
                                <th>Video</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="cheatingTableBody">
                            <tr>
                                <td colspan="9" class="text-center">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination for cheating logs -->
                <nav class="mt-4" id="cheatingLogsPagination"></nav>
            </div>
        </div>

        <!-- C·∫≠p nh·∫≠t questions-section -->
        <div id="questions-section" class="content-section">
            <div class="table-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="chart-title mb-0">Ng√¢n H√†ng C√¢u H·ªèi</h6>
                    <div>
                        <a class="btn btn-outline-primary me-2" href="/sample_questions.xlsx" download>
                            <i class="bi bi-download"></i> T·∫£i file m·∫´u
                        </a>
                        <button class="btn btn-warning me-2" onclick="removeDuplicateQuestions()"
                            style="background: #f59e0b; color: white; border: none;">
                            <i class="bi bi-trash"></i> X√≥a c√¢u h·ªèi tr√πng
                        </button>
                        <button class="btn btn-primary" id="addQuestionBtn">
                            <i class="bi bi-plus-lg"></i> Th√™m c√¢u h·ªèi
                        </button>
                        <button class="btn btn-primary" id="importQuestionBtn">
                            <i class="bi bi-upload"></i> Import Excel/CSV
                        </button>
                    </div>
                </div>

                <!-- B·ªô l·ªçc -->
                <div class="row g-3 mb-4">
                    <div class="col-md-4">
                        <label class="form-label small">T√¨m ki·∫øm</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="questionSearchInput"
                                placeholder="T√¨m ki·∫øm c√¢u h·ªèi...">
                            <button class="btn btn-outline-secondary" type="button" onclick="loadQuestionsData(1)">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">M√¥n h·ªçc</label>
                        <select class="form-select" id="questionSubjectFilter">
                            <option value="all">T·∫•t c·∫£</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">M·ª©c ƒë·ªô</label>
                        <select class="form-select" id="questionDifficultyFilter">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="Easy">D·ªÖ</option>
                            <option value="Medium">Trung b√¨nh</option>
                            <option value="Hard">Kh√≥</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">Lo·∫°i c√¢u h·ªèi</label>
                        <select class="form-select" id="questionTypeFilter">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="Multiple Choice">Tr·∫Øc nghi·ªám</option>
                            <option value="True/False">ƒê√∫ng/Sai</option>
                            <option value="Short Answer">T·ª± lu·∫≠n ng·∫Øn</option>
                            <option value="Essay">T·ª± lu·∫≠n</option>
                        </select>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button class="btn btn-outline-secondary w-100" onclick="loadQuestionsData(1)">
                            <i class="bi bi-arrow-clockwise"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th style="width: 50px;">ID</th>
                                <th>N·ªôi dung c√¢u h·ªèi</th>
                                <th>M√¥n h·ªçc</th>
                                <th>M·ª©c ƒë·ªô</th>
                                <th>Lo·∫°i</th>
                                <th>T·ª∑ l·ªá ƒë√∫ng</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="questionsTableBody">
                            <tr>
                                <td colspan="7" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <nav class="mt-4" id="questionsPagination"></nav>
            </div>
        </div>

        <!-- Modal import c√¢u h·ªèi -->
        <div class="modal fade" id="importQuestionModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Import C√¢u H·ªèi</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="importQuestionForm">
                            <div class="mb-3">
                                <label class="form-label">Ch·ªçn k·ª≥ thi (t√πy ch·ªçn)</label>
                                <select class="form-select" id="importExamId">
                                    <option value="">Kh√¥ng ch·ªçn k·ª≥ thi</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">T·∫£i l√™n file Excel/CSV</label>
                                <input type="file" class="form-control" id="importFile" accept=".xlsx,.csv" required>
                            </div>
                        </form>
                        <div id="previewQuestions" class="mt-3"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                        <button type="button" class="btn btn-primary" id="saveImportBtn">L∆∞u</button>
                        <button type="button" class="btn btn-info" id="previewImportBtn">Xem tr∆∞·ªõc</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal xem chi ti·∫øt c√¢u h·ªèi -->
        <div class="modal fade" id="viewQuestionModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="bi bi-question-circle"></i> Chi ti·∫øt c√¢u h·ªèi
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body" id="questionDetailContent">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">ƒêang t·∫£i...</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal webcam -->
        <div class="modal fade" id="webcamModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Webcam c·ªßa h·ªçc sinh</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <video id="webcamStream" autoplay style="width: 100%;"></video>
                    </div>
                </div>
            </div>
        </div>

        <div id="subjects-section" class="content-section">
            <!-- Danh s√°ch m√¥n h·ªçc (m·∫∑c ƒë·ªãnh) -->
            <div id="subjectsList">
                <div class="card">
                    <div class="card-body">
                        <button class="btn btn-primary mb-3" id="addSubjectBtn">Th√™m m√¥n h·ªçc</button>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>T√™n m√¥n h·ªçc</th>
                                        <th>S·ªë c√¢u h·ªèi</th>
                                        <th>S·ªë k·ª≥ thi</th>
                                        <th>S·ªë l·ªõp</th>
                                        <th>Tr·∫°ng th√°i</th>
                                        <th>H√†nh ƒë·ªông</th>
                                    </tr>
                                </thead>
                                <tbody id="subjectsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Chi ti·∫øt m√¥n h·ªçc (hi·ªÉn th·ªã khi b·∫•m Xem chi ti·∫øt) -->
            <div id="subjectDetail" style="display: none;">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="card-title">Chi ti·∫øt m√¥n h·ªçc: <span id="subjectNameDetail"></span></h5>
                            <button class="btn btn-secondary" id="backToSubjectsBtn">Quay l·∫°i</button>
                        </div>
                        <div class="mb-3">
                            <p>S·ªë l∆∞·ª£ng sinh vi√™n: <strong id="studentCount">0</strong></p>
                            <p>Gi√°o vi√™n ch·ªß nhi·ªám: <strong id="teacherName">Ch∆∞a c√≥</strong></p>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="studentSearch"
                                placeholder="T√¨m ki·∫øm sinh vi√™n...">
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover" id="studentListTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>H·ªç t√™n</th>
                                        <th>Email</th>
                                        <th class="sortable" data-sort="avg_score" data-order="desc">ƒêi·ªÉm trung b√¨nh <i
                                                class="bi bi-sort-down"></i></th>
                                        <th>H√†nh ƒë·ªông</th>
                                    </tr>
                                </thead>
                                <tbody id="studentListTableBody"></tbody>
                            </table>
                        </div>
                        <div class="mt-3">
                            <p>Th·ªëng k√™ ƒëi·ªÉm:</p>
                            <ul>
                                <li>ƒêi·ªÉm trung b√¨nh m√¥n: <strong id="avgScore">0</strong></li>
                                <li>ƒêi·ªÉm cao nh·∫•t: <strong id="maxScore">0</strong></li>
                                <li>ƒêi·ªÉm th·∫•p nh·∫•t: <strong id="minScore">0</strong></li>
                            </ul>
                        </div>
                        <button class="btn btn-primary mt-3" id="exportScoresBtn">Xu·∫•t ƒëi·ªÉm (CSV)</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="reports-section" class="content-section">
            <!-- B·ªô l·ªçc v√† n√∫t xu·∫•t b√°o c√°o -->
            <div class="row g-3 mb-4">
                <div class="col-md-3">
                    <label class="form-label small">Kho·∫£ng th·ªùi gian</label>
                    <select class="form-select" id="reportPeriod">
                        <option value="week">7 ng√†y qua</option>
                        <option value="month" selected>30 ng√†y qua</option>
                        <option value="quarter">3 th√°ng qua</option>
                        <option value="year">1 nƒÉm qua</option>
                        <option value="custom">T√πy ch·ªânh</option>
                    </select>
                </div>
                <div class="col-md-3" id="customDateRange" style="display: none;">
                    <label class="form-label small">T·ª´ ng√†y</label>
                    <input type="date" class="form-control" id="startDate">
                </div>
                <div class="col-md-3" id="customDateRangeTo" style="display: none;">
                    <label class="form-label small">ƒê·∫øn ng√†y</label>
                    <input type="date" class="form-control" id="endDate">
                </div>
                <div class="col-md-3">
                    <label class="form-label small">M√¥n h·ªçc</label>
                    <select class="form-select" id="reportSubjectFilter">
                        <option value="">T·∫•t c·∫£ m√¥n h·ªçc</option>
                    </select>
                </div>
                <div class="col-md-3 d-flex align-items-end gap-2">
                    <button class="btn btn-primary" id="applyReportFilter">
                        <i class="bi bi-funnel"></i> √Åp d·ª•ng
                    </button>
                    <button class="btn btn-outline-secondary" id="resetReportFilter">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
                <div class="col-md-9 d-flex align-items-end justify-content-end gap-2">
                    <button class="btn btn-outline-success" id="exportExcel">
                        <i class="bi bi-file-earmark-excel"></i> Xu·∫•t Excel
                    </button>
                    <button class="btn btn-outline-danger" id="exportPDF">
                        <i class="bi bi-file-earmark-pdf"></i> Xu·∫•t PDF
                    </button>
                    <button class="btn btn-outline-primary" id="printReport">
                        <i class="bi bi-printer"></i> In b√°o c√°o
                    </button>
                </div>
            </div>

            <!-- Th·ªëng k√™ t·ªïng quan -->
            <div class="row g-3 mb-4">
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon primary-icon">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <div class="stat-label">T·ªïng s·ªë b√†i thi</div>
                        <div class="stat-value" id="reportTotalExams">0</div>
                        <div class="stat-change text-muted">
                            <small>Trong kho·∫£ng th·ªùi gian ƒë√£ ch·ªçn</small>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon success-icon">
                            <i class="bi bi-check-circle"></i>
                        </div>
                        <div class="stat-label">T·ª∑ l·ªá ho√†n th√†nh</div>
                        <div class="stat-value" id="reportCompletionRate">0%</div>
                        <div class="stat-change" id="reportCompletionTrend">
                            <i class="bi bi-arrow-up"></i> +0%
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon warning-icon">
                            <i class="bi bi-star"></i>
                        </div>
                        <div class="stat-label">ƒêi·ªÉm trung b√¨nh</div>
                        <div class="stat-value" id="reportAvgScore">0</div>
                        <div class="stat-change" id="reportScoreTrend">
                            <i class="bi bi-arrow-up"></i> +0
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 col-6">
                    <div class="stat-card">
                        <div class="stat-icon danger-icon">
                            <i class="bi bi-exclamation-triangle"></i>
                        </div>
                        <div class="stat-label">C·∫£nh b√°o gian l·∫≠n</div>
                        <div class="stat-value" id="reportCheatingWarnings">0</div>
                        <div class="stat-change text-danger">
                            <small id="reportCheatingDetail">0 h·ªçc sinh vi ph·∫°m</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bi·ªÉu ƒë·ªì ph√¢n t√≠ch -->
            <div class="row g-4 mb-4">
                <div class="col-xl-8">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">Xu h∆∞·ªõng ƒëi·ªÉm s·ªë theo th·ªùi gian</h6>
                            <div class="btn-group btn-group-sm" role="group">
                                <button type="button" class="btn btn-outline-primary active" data-chart-type="line">
                                    <i class="bi bi-graph-up"></i> ƒê∆∞·ªùng
                                </button>
                                <button type="button" class="btn btn-outline-primary" data-chart-type="bar">
                                    <i class="bi bi-bar-chart"></i> C·ªôt
                                </button>
                            </div>
                        </div>
                        <canvas id="scoreTrendChart" height="80"></canvas>
                    </div>
                </div>
                <div class="col-xl-4">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">Ph√¢n b·ªë x·∫øp lo·∫°i</h6>
                        <canvas id="gradeDistributionChart"></canvas>
                        <div class="mt-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span><i class="bi bi-circle-fill" style="color: #198754;"></i> Xu·∫•t s·∫Øc (8-10)</span>
                                <strong id="excellentPercent">0%</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span><i class="bi bi-circle-fill" style="color: #7f8ac5;"></i> Kh√° (6.5-8)</span>
                                <strong id="goodPercent">0%</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span><i class="bi bi-circle-fill" style="color: #ffc107;"></i> Trung b√¨nh
                                    (5-6.5)</span>
                                <strong id="averagePercent">0%</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span><i class="bi bi-circle-fill" style="color: #dc3545;"></i> Y·∫øu (<5)< /span>
                                        <strong id="weakPercent">0%</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bi·ªÉu ƒë·ªì so s√°nh m√¥n h·ªçc -->
            <div class="row g-4 mb-4">
                <div class="col-12">
                    <div class="chart-card">
                        <h6 class="chart-title">So s√°nh ƒëi·ªÉm trung b√¨nh theo m√¥n h·ªçc</h6>
                        <canvas id="subjectComparisonChart" height="80"></canvas>
                    </div>
                </div>
            </div>

            <!-- Top performers v√† c·∫£nh b√°o -->
            <div class="row g-4 mb-4">
                <div class="col-xl-6">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">Top 10 h·ªçc sinh xu·∫•t s·∫Øc</h6>
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>H·ªç t√™n</th>
                                        <th>ƒêi·ªÉm TB</th>
                                        <th>S·ªë b√†i thi</th>
                                    </tr>
                                </thead>
                                <tbody id="topStudentsTable">
                                    <tr>
                                        <td colspan="4" class="text-center">ƒêang t·∫£i...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="chart-card">
                        <h6 class="chart-title mb-3">H·ªçc sinh c·∫ßn h·ªó tr·ª£</h6>
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>H·ªç t√™n</th>
                                        <th>ƒêi·ªÉm TB</th>
                                        <th>C·∫£nh b√°o</th>
                                    </tr>
                                </thead>
                                <tbody id="warningStudentsTable">
                                    <tr>
                                        <td colspan="4" class="text-center">ƒêang t·∫£i...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- B√°o c√°o chi ti·∫øt theo k·ª≥ thi -->
            <div class="table-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="chart-title mb-0">B√°o c√°o chi ti·∫øt theo k·ª≥ thi</h6>
                    <div class="input-group" style="width: 300px;">
                        <input type="text" class="form-control" id="searchExamReport" placeholder="T√¨m ki·∫øm k·ª≥ thi...">
                        <button class="btn btn-outline-secondary" type="button">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="exam_name">
                                    K·ª≥ thi <i class="bi bi-arrow-down-up"></i>
                                </th>
                                <th class="sortable" data-sort="subject">
                                    M√¥n h·ªçc <i class="bi bi-arrow-down-up"></i>
                                </th>
                                <th class="sortable" data-sort="student_count">
                                    S·ªë SV <i class="bi bi-arrow-down-up"></i>
                                </th>
                                <th class="sortable" data-sort="completion_rate">
                                    Ho√†n th√†nh <i class="bi bi-arrow-down-up"></i>
                                </th>
                                <th class="sortable" data-sort="avg_score">
                                    ƒêi·ªÉm TB <i class="bi bi-arrow-down-up"></i>
                                </th>
                                <th>Cao nh·∫•t</th>
                                <th>Th·∫•p nh·∫•t</th>
                                <th class="sortable" data-sort="cheating">
                                    C·∫£nh b√°o <i class="bi bi-arrow-down-up"></i>
                                </th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="examReportTableBody">
                            <tr>
                                <td colspan="9" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <nav class="mt-4">
                    <ul class="pagination justify-content-center" id="reportPagination">
                        <li class="page-item disabled"><a class="page-link" href="#">Tr∆∞·ªõc</a></li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                    </ul>
                </nav>
            </div>

            <!-- L·ªãch s·ª≠ s·ª≠a ƒëi·ªÉm c·ªßa gi√°o vi√™n -->
            <div class="table-card mt-4">
                <div
                    class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
                    <h6 class="chart-title mb-0">
                        <i class="bi bi-pencil-square"></i> L·ªãch s·ª≠ s·ª≠a ƒëi·ªÉm c·ªßa gi√°o vi√™n
                    </h6>
                    <div class="d-flex flex-column flex-md-row gap-2 w-100 w-md-auto">
                        <div class="d-flex gap-2 flex-grow-1">
                            <input type="date" class="form-control form-control-sm" id="scoreHistoryStartDate">
                            <input type="date" class="form-control form-control-sm" id="scoreHistoryEndDate">
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-primary flex-grow-1 flex-md-grow-0"
                                onclick="loadScoreHistory()">
                                <i class="bi bi-search"></i> <span class="d-none d-md-inline">T√¨m ki·∫øm</span>
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="resetScoreHistoryFilter()">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Th·ªùi gian</th>
                                <th>Gi√°o vi√™n</th>
                                <th>H·ªçc sinh</th>
                                <th>B√†i thi</th>
                                <th>M√¥n h·ªçc</th>
                                <th>C√¢u h·ªèi</th>
                                <th>ƒêi·ªÉm c≈©</th>
                                <th>ƒêi·ªÉm m·ªõi</th>
                                <th>T·ªïng ƒëi·ªÉm c≈©</th>
                                <th>T·ªïng ƒëi·ªÉm m·ªõi</th>
                                <th>L√Ω do</th>
                            </tr>
                        </thead>
                        <tbody id="scoreHistoryTableBody">
                            <tr>
                                <td colspan="11" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <nav class="mt-3">
                    <ul class="pagination justify-content-center" id="scoreHistoryPagination">
                    </ul>
                </nav>
            </div>

            <!-- L·ªãch s·ª≠ khi·∫øu n·∫°i c·ªßa h·ªçc sinh -->
            <div class="table-card mt-4" id="complaints-history-section">
                <div
                    class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
                    <h6 class="chart-title mb-0">
                        <i class="bi bi-exclamation-circle"></i> L·ªãch s·ª≠ khi·∫øu n·∫°i c·ªßa h·ªçc sinh
                    </h6>
                    <div class="d-flex flex-column flex-md-row gap-2 w-100 w-md-auto">
                        <select class="form-select form-select-sm" id="complaintStatusFilter">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="Pending">ƒêang ch·ªù</option>
                            <option value="Resolved">ƒê√£ x·ª≠ l√Ω</option>
                            <option value="Rejected">T·ª´ ch·ªëi</option>
                        </select>
                        <div class="d-flex gap-2 flex-grow-1">
                            <input type="date" class="form-control form-control-sm" id="complaintHistoryStartDate">
                            <input type="date" class="form-control form-control-sm" id="complaintHistoryEndDate">
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-primary flex-grow-1 flex-md-grow-0"
                                onclick="loadComplaintsHistory()">
                                <i class="bi bi-search"></i> <span class="d-none d-md-inline">T√¨m ki·∫øm</span>
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="resetComplaintHistoryFilter()">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Th·ªùi gian</th>
                                <th>H·ªçc sinh</th>
                                <th>B√†i thi</th>
                                <th>M√¥n h·ªçc</th>
                                <th>ƒêi·ªÉm</th>
                                <th>N·ªôi dung khi·∫øu n·∫°i</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Ph·∫£n h·ªìi gi√°o vi√™n</th>
                                <th>Gi√°o vi√™n</th>
                            </tr>
                        </thead>
                        <tbody id="complaintsHistoryTableBody">
                            <tr>
                                <td colspan="9" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <nav class="mt-3">
                    <ul class="pagination justify-content-center" id="complaintsHistoryPagination">
                    </ul>
                </nav>
            </div>

            <!-- B√°o c√°o s·ª≠ d·ª•ng AI -->
            <div class="row g-4 mb-4 mt-4">
                <div class="col-12">
                    <div class="chart-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h6 class="chart-title mb-0">
                                <i class="bi bi-robot"></i> B√°o c√°o s·ª≠ d·ª•ng AI
                            </h6>
                            <button class="btn btn-sm btn-outline-primary" onclick="loadAIUsageReport()"
                                title="L√†m m·ªõi">
                                <i class="bi bi-arrow-clockwise"></i> L√†m m·ªõi
                            </button>
                        </div>

                        <!-- Th·ªëng k√™ t·ªïng quan AI -->
                        <div class="row g-3 mb-4" id="aiOverviewCards">
                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card">
                                    <div class="stat-icon info-icon">
                                        <i class="bi bi-cpu"></i>
                                    </div>
                                    <div class="stat-label">T·ªïng y√™u c·∫ßu AI</div>
                                    <div class="stat-value" id="aiTotalRequests">0</div>
                                    <div class="stat-change" id="aiRequestTrend">
                                        <i class="bi bi-arrow-up"></i> +0%
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card">
                                    <div class="stat-icon primary-icon">
                                        <i class="bi bi-people"></i>
                                    </div>
                                    <div class="stat-label">Ng∆∞·ªùi d√πng AI</div>
                                    <div class="stat-value" id="aiTotalUsers">0</div>
                                    <div class="stat-change text-muted">
                                        <small>Ng∆∞·ªùi d√πng ƒë√£ s·ª≠ d·ª•ng</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card">
                                    <div class="stat-icon success-icon">
                                        <i class="bi bi-token"></i>
                                    </div>
                                    <div class="stat-label">T·ªïng Tokens</div>
                                    <div class="stat-value" id="aiTotalTokens">0</div>
                                    <div class="stat-change" id="aiTokenTrend">
                                        <i class="bi bi-arrow-up"></i> +0%
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card">
                                    <div class="stat-icon warning-icon">
                                        <i class="bi bi-pie-chart"></i>
                                    </div>
                                    <div class="stat-label">Provider ch√≠nh</div>
                                    <div class="stat-value" id="aiMainProvider">-</div>
                                    <div class="stat-change text-muted">
                                        <small id="aiProviderDetail">Groq/Gemini/OpenAI</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ph√¢n b·ªë theo Provider -->
                        <div class="row g-4 mb-4">
                            <div class="col-xl-6">
                                <div class="chart-card">
                                    <h6 class="chart-title mb-3">Ph√¢n b·ªë theo Provider</h6>
                                    <canvas id="aiProviderChart"></canvas>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="chart-card">
                                    <h6 class="chart-title mb-3">Ph√¢n b·ªë theo Lo·∫°i Action</h6>
                                    <canvas id="aiActionChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Xu h∆∞·ªõng s·ª≠ d·ª•ng theo ng√†y -->
                        <div class="row g-4 mb-4">
                            <div class="col-12">
                                <div class="chart-card">
                                    <h6 class="chart-title mb-3">Xu h∆∞·ªõng s·ª≠ d·ª•ng AI theo ng√†y</h6>
                                    <div style="position: relative; height: 300px;">
                                        <canvas id="aiDailyUsageChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Top users s·ª≠ d·ª•ng AI -->
                        <div class="row g-4 mb-4">
                            <div class="col-12">
                                <div class="chart-card">
                                    <h6 class="chart-title mb-3">Top 20 ng∆∞·ªùi d√πng s·ª≠ d·ª•ng AI nhi·ªÅu nh·∫•t</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-hover">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>H·ªç t√™n</th>
                                                    <th>Email</th>
                                                    <th>Vai tr√≤</th>
                                                    <th>S·ªë y√™u c·∫ßu</th>
                                                    <th>T·ªïng Tokens</th>
                                                    <th>Ng√†y s·ª≠ d·ª•ng</th>
                                                    <th>Providers</th>
                                                </tr>
                                            </thead>
                                            <tbody id="aiTopUsersTable">
                                                <tr>
                                                    <td colspan="8" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Th·ªëng k√™ theo vai tr√≤ -->
                        <div class="row g-4 mb-4">
                            <div class="col-xl-6">
                                <div class="chart-card">
                                    <h6 class="chart-title mb-3">Th·ªëng k√™ theo Vai tr√≤</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Vai tr√≤</th>
                                                    <th>S·ªë y√™u c·∫ßu</th>
                                                    <th>T·ªïng Tokens</th>
                                                    <th>S·ªë ng∆∞·ªùi d√πng</th>
                                                </tr>
                                            </thead>
                                            <tbody id="aiRoleStatsTable">
                                                <tr>
                                                    <td colspan="4" class="text-center">ƒêang t·∫£i...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="chart-card">
                                    <h6 class="chart-title mb-3">Chi ti·∫øt theo Provider</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Provider</th>
                                                    <th>Y√™u c·∫ßu</th>
                                                    <th>Tokens</th>
                                                    <th>Ng∆∞·ªùi d√πng</th>
                                                </tr>
                                            </thead>
                                            <tbody id="aiProviderStatsTable">
                                                <tr>
                                                    <td colspan="4" class="text-center">ƒêang t·∫£i...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="settings-section" class="content-section">
            <div class="row g-4">
                <div class="col-12">
                    <div class="table-card">
                        <h6 class="chart-title mb-4">C√†i ƒê·∫∑t H·ªá Th·ªëng</h6>

                        <!-- Tabs Navigation -->
                        <ul class="nav nav-tabs mb-4" id="settingsTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="exam-tab" data-bs-toggle="tab"
                                    data-bs-target="#exam-settings" type="button">
                                    <i class="bi bi-file-earmark-text"></i> Thi c·ª≠
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="antiCheat-tab" data-bs-toggle="tab"
                                    data-bs-target="#antiCheat-settings" type="button">
                                    <i class="bi bi-shield-check"></i> Ch·ªëng gian l·∫≠n
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="notification-tab" data-bs-toggle="tab"
                                    data-bs-target="#notification-settings" type="button">
                                    <i class="bi bi-bell"></i> Th√¥ng b√°o
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="security-tab" data-bs-toggle="tab"
                                    data-bs-target="#security-settings" type="button">
                                    <i class="bi bi-lock"></i> B·∫£o m·∫≠t
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="display-tab" data-bs-toggle="tab"
                                    data-bs-target="#display-settings" type="button">
                                    <i class="bi bi-palette"></i> Giao di·ªán
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="email-tab" data-bs-toggle="tab"
                                    data-bs-target="#email-settings" type="button">
                                    <i class="bi bi-envelope"></i> Email & SMTP
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="user-tab" data-bs-toggle="tab"
                                    data-bs-target="#user-settings" type="button">
                                    <i class="bi bi-people"></i> Ng∆∞·ªùi d√πng
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="system-tab" data-bs-toggle="tab"
                                    data-bs-target="#system-settings" type="button">
                                    <i class="bi bi-gear"></i> H·ªá th·ªëng
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="backup-tab" data-bs-toggle="tab"
                                    data-bs-target="#backup-settings" type="button">
                                    <i class="bi bi-database"></i> Sao l∆∞u & Kh√¥i ph·ª•c
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="logs-tab" data-bs-toggle="tab"
                                    data-bs-target="#logs-settings" type="button">
                                    <i class="bi bi-file-text"></i> Logs & Gi√°m s√°t
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="api-tab" data-bs-toggle="tab"
                                    data-bs-target="#api-settings" type="button">
                                    <i class="bi bi-code-slash"></i> API & T√≠ch h·ª£p
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="performance-tab" data-bs-toggle="tab"
                                    data-bs-target="#performance-settings" type="button">
                                    <i class="bi bi-speedometer"></i> Hi·ªáu su·∫•t
                                </button>
                            </li>
                        </ul>
                    </div>

                    <!-- Tabs Content -->
                    <div class="tab-content" id="settingsTabContent">
                        <!-- Exam Settings Tab -->
                        <div class="tab-pane fade show active" id="exam-settings" role="tabpanel">
                            <form id="examSettingsForm">
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian l√†m b√†i m·∫∑c ƒë·ªãnh (ph√∫t)</label>
                                    <input type="number" class="form-control" id="defaultDuration" min="1" required>
                                    <small class="text-muted">Th·ªùi gian m·∫∑c ƒë·ªãnh cho c√°c k·ª≥ thi m·ªõi</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">ƒêi·ªÉm ƒë·∫°t m·∫∑c ƒë·ªãnh</label>
                                    <input type="number" class="form-control" id="defaultPassingScore" step="0.1"
                                        min="0" max="10" required>
                                    <small class="text-muted">ƒêi·ªÉm t·ªëi thi·ªÉu ƒë·ªÉ ƒë·∫°t (thang ƒëi·ªÉm 10)</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableAutoSubmit">
                                    <label class="form-check-label" for="enableAutoSubmit">
                                        T·ª± ƒë·ªông n·ªôp b√†i khi h·∫øt th·ªùi gian
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableReviewBeforeSubmit">
                                    <label class="form-check-label" for="enableReviewBeforeSubmit">
                                        Cho ph√©p xem l·∫°i tr∆∞·ªõc khi n·ªôp b√†i
                                    </label>
                                </div>
                            </form>
                        </div>

                        <!-- Anti-Cheat Settings Tab -->
                        <div class="tab-pane fade" id="antiCheat-settings" role="tabpanel">
                            <form id="antiCheatSettingsForm">
                                <div class="mb-3">
                                    <label class="form-label">S·ªë c·∫£nh b√°o t·ªëi ƒëa</label>
                                    <input type="number" class="form-control" id="maxWarnings" min="1" max="10"
                                        required>
                                    <small class="text-muted">S·ªë l·∫ßn c·∫£nh b√°o tr∆∞·ªõc khi t·ª± ƒë·ªông n·ªôp b√†i</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableWebcamMonitoring">
                                    <label class="form-check-label" for="enableWebcamMonitoring">
                                        B·∫≠t gi√°m s√°t webcam
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableTabSwitchDetection">
                                    <label class="form-check-label" for="enableTabSwitchDetection">
                                        Ph√°t hi·ªán chuy·ªÉn tab
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableCopyPasteDetection">
                                    <label class="form-check-label" for="enableCopyPasteDetection">
                                        Ph√°t hi·ªán copy/paste
                                    </label>
                                </div>
                            </form>
                        </div>

                        <!-- Notification Settings Tab -->
                        <div class="tab-pane fade" id="notification-settings" role="tabpanel">
                            <form id="notificationSettingsForm">
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableEmail">
                                    <label class="form-check-label" for="enableEmail">
                                        G·ª≠i th√¥ng b√°o qua email
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="notifyExamStart">
                                    <label class="form-check-label" for="notifyExamStart">
                                        Th√¥ng b√°o khi k·ª≥ thi b·∫Øt ƒë·∫ßu
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="notifyExamEnd">
                                    <label class="form-check-label" for="notifyExamEnd">
                                        Th√¥ng b√°o khi k·ª≥ thi k·∫øt th√∫c
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="notifyScoreAvailable">
                                    <label class="form-check-label" for="notifyScoreAvailable">
                                        Th√¥ng b√°o khi ƒëi·ªÉm s·ªë c√≥ s·∫µn
                                    </label>
                                </div>
                            </form>
                        </div>

                        <!-- Security Settings Tab -->
                        <div class="tab-pane fade" id="security-settings" role="tabpanel">
                            <form id="securitySettingsForm">
                                <h6 class="mb-3">ƒêƒÉng nh·∫≠p & Phi√™n l√†m vi·ªác</h6>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian h·∫øt h·∫°n phi√™n (ph√∫t)</label>
                                    <input type="number" class="form-control" id="sessionTimeout" min="5" max="480"
                                        value="30">
                                    <small class="text-muted">Th·ªùi gian kh√¥ng ho·∫°t ƒë·ªông tr∆∞·ªõc khi t·ª± ƒë·ªông ƒëƒÉng
                                        xu·∫•t</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">S·ªë l·∫ßn ƒëƒÉng nh·∫≠p sai t·ªëi ƒëa</label>
                                    <input type="number" class="form-control" id="maxLoginAttempts" min="3" max="10"
                                        value="5">
                                    <small class="text-muted">S·ªë l·∫ßn ƒëƒÉng nh·∫≠p sai tr∆∞·ªõc khi kh√≥a t√†i kho·∫£n</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian kh√≥a t√†i kho·∫£n (ph√∫t)</label>
                                    <input type="number" class="form-control" id="accountLockoutDuration" min="5"
                                        max="1440" value="15">
                                    <small class="text-muted">Th·ªùi gian kh√≥a t√†i kho·∫£n sau khi ƒëƒÉng nh·∫≠p sai nhi·ªÅu
                                        l·∫ßn</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="requireStrongPassword">
                                    <label class="form-check-label" for="requireStrongPassword">
                                        Y√™u c·∫ßu m·∫≠t kh·∫©u m·∫°nh
                                    </label>
                                    <small class="text-muted d-block">M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±, bao g·ªìm ch·ªØ hoa,
                                        ch·ªØ th∆∞·ªùng, s·ªë v√† k√Ω t·ª± ƒë·∫∑c bi·ªát</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableTwoFactor">
                                    <label class="form-check-label" for="enableTwoFactor">
                                        B·∫≠t x√°c th·ª±c hai y·∫øu t·ªë (2FA)
                                    </label>
                                    <small class="text-muted d-block">Y√™u c·∫ßu m√£ OTP khi ƒëƒÉng nh·∫≠p</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableIPWhitelist">
                                    <label class="form-check-label" for="enableIPWhitelist">
                                        B·∫≠t danh s√°ch IP tr·∫Øng
                                    </label>
                                    <small class="text-muted d-block">Ch·ªâ cho ph√©p ƒëƒÉng nh·∫≠p t·ª´ c√°c IP ƒë√£ ƒë∆∞·ª£c ph√™
                                        duy·ªát</small>
                                </div>
                            </form>
                        </div>

                        <!-- Display Settings Tab -->
                        <div class="tab-pane fade" id="display-settings" role="tabpanel">
                            <form id="displaySettingsForm">
                                <h6 class="mb-3">Giao di·ªán & Hi·ªÉn th·ªã</h6>
                                <div class="mb-3">
                                    <label class="form-label">Ng√¥n ng·ªØ</label>
                                    <select class="form-select" id="language">
                                        <option value="vi">Ti·∫øng Vi·ªát</option>
                                        <option value="en">English</option>
                                    </select>
                                    <small class="text-muted">Ng√¥n ng·ªØ hi·ªÉn th·ªã c·ªßa h·ªá th·ªëng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">M√†u tabs sidebar</label>
                                    <div class="d-flex align-items-center gap-3">
                                        <input type="color" class="form-control form-control-color" id="tabColor"
                                            value="#8ea7e9" title="Ch·ªçn m√†u tabs">
                                        <input type="text" class="form-control" id="tabColorHex" value="#8ea7e9"
                                            placeholder="#8ea7e9" style="max-width: 120px;">
                                        <button type="button" class="btn btn-sm btn-secondary"
                                            onclick="resetTabColor()">M·∫∑c ƒë·ªãnh</button>
                                    </div>
                                    <small class="text-muted">M√†u hi·ªÉn th·ªã khi tabs ƒë∆∞·ª£c ch·ªçn ho·∫∑c hover (ch·ªâ √°p d·ª•ng
                                        cho sidebar)</small>
                                    <div class="mt-2">
                                        <div class="d-flex gap-2 flex-wrap">
                                            <button type="button" class="btn btn-sm"
                                                style="background: #667eea; color: white; border: none;"
                                                onclick="setTabColor('#667eea')">T√≠m</button>
                                            <button type="button" class="btn btn-sm"
                                                style="background: #4299e1; color: white; border: none;"
                                                onclick="setTabColor('#4299e1')">Xanh d∆∞∆°ng</button>
                                            <button type="button" class="btn btn-sm"
                                                style="background: #48bb78; color: white; border: none;"
                                                onclick="setTabColor('#48bb78')">Xanh l√°</button>
                                            <button type="button" class="btn btn-sm"
                                                style="background: #ed8936; color: white; border: none;"
                                                onclick="setTabColor('#ed8936')">Cam</button>
                                            <button type="button" class="btn btn-sm"
                                                style="background: #f56565; color: white; border: none;"
                                                onclick="setTabColor('#f56565')">ƒê·ªè</button>
                                            <button type="button" class="btn btn-sm"
                                                style="background: #9f7aea; color: white; border: none;"
                                                onclick="setTabColor('#9f7aea')">T√≠m nh·∫°t</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">M√†u ch·ªß ƒë·∫°o</label>
                                    <input type="color" class="form-control form-control-color" id="primaryColor"
                                        value="#7f8ac5" title="Ch·ªçn m√†u ch·ªß ƒë·∫°o">
                                    <small class="text-muted">M√†u ch·ªß ƒë·∫°o c·ªßa giao di·ªán</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">K√≠ch th∆∞·ªõc font ch·ªØ</label>
                                    <select class="form-select" id="fontSize">
                                        <option value="small">Nh·ªè</option>
                                        <option value="medium" selected>Trung b√¨nh</option>
                                        <option value="large">L·ªõn</option>
                                    </select>
                                    <small class="text-muted">K√≠ch th∆∞·ªõc font ch·ªØ m·∫∑c ƒë·ªãnh</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="compactMode">
                                    <label class="form-check-label" for="compactMode">
                                        Ch·∫ø ƒë·ªô compact
                                    </label>
                                    <small class="text-muted d-block">Gi·∫£m kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ ƒë·ªÉ hi·ªÉn th·ªã
                                        nhi·ªÅu n·ªôi dung h∆°n</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="showAnimations">
                                    <label class="form-check-label" for="showAnimations">
                                        Hi·ªÉn th·ªã hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông
                                    </label>
                                    <small class="text-muted d-block">B·∫≠t/t·∫Øt c√°c animation v√† transition
                                        effects</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="showTooltips">
                                    <label class="form-check-label" for="showTooltips">
                                        Hi·ªÉn th·ªã tooltip g·ª£i √Ω
                                    </label>
                                    <small class="text-muted d-block">Hi·ªÉn th·ªã g·ª£i √Ω khi di chu·ªôt qua c√°c n√∫t v√† bi·ªÉu
                                        t∆∞·ª£ng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">S·ªë m·ª•c hi·ªÉn th·ªã m·ªói trang (b·∫£ng)</label>
                                    <input type="number" class="form-control" id="itemsPerPage" min="10" max="100"
                                        value="25">
                                    <small class="text-muted">S·ªë d√≤ng hi·ªÉn th·ªã trong c√°c b·∫£ng danh s√°ch</small>
                                </div>
                            </form>
                        </div>

                        <!-- Email Settings Tab -->
                        <div class="tab-pane fade" id="email-settings" role="tabpanel">
                            <form id="emailSettingsForm">
                                <h6 class="mb-3">C·∫•u h√¨nh SMTP</h6>
                                <div class="mb-3">
                                    <label class="form-label">SMTP Server</label>
                                    <input type="text" class="form-control" id="smtpHost" placeholder="smtp.gmail.com">
                                    <small class="text-muted">ƒê·ªãa ch·ªâ m√°y ch·ªß SMTP</small>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">SMTP Port</label>
                                        <input type="number" class="form-control" id="smtpPort" placeholder="587"
                                            min="1" max="65535">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">B·∫£o m·∫≠t</label>
                                        <select class="form-select" id="smtpSecure">
                                            <option value="none">Kh√¥ng</option>
                                            <option value="tls">TLS</option>
                                            <option value="ssl">SSL</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email g·ª≠i</label>
                                    <input type="email" class="form-control" id="smtpEmail"
                                        placeholder="noreply@example.com">
                                    <small class="text-muted">ƒê·ªãa ch·ªâ email d√πng ƒë·ªÉ g·ª≠i th√¥ng b√°o</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">M·∫≠t kh·∫©u email</label>
                                    <input type="password" class="form-control" id="smtpPassword"
                                        autocomplete="new-password" placeholder="M·∫≠t kh·∫©u ho·∫∑c App Password">
                                    <small class="text-muted">M·∫≠t kh·∫©u email ho·∫∑c App Password (n·∫øu d√πng Gmail)</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="testEmailConnection">
                                    <label class="form-check-label" for="testEmailConnection">
                                        Ki·ªÉm tra k·∫øt n·ªëi email
                                    </label>
                                    <small class="text-muted d-block">G·ª≠i email test ƒë·ªÉ ki·ªÉm tra c·∫•u h√¨nh</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">M·∫´u email</h6>
                                <div class="mb-3">
                                    <label class="form-label">Email ng∆∞·ªùi g·ª≠i hi·ªÉn th·ªã</label>
                                    <input type="text" class="form-control" id="emailFromName"
                                        placeholder="H·ªá th·ªëng thi tr·ª±c tuy·∫øn">
                                    <small class="text-muted">T√™n hi·ªÉn th·ªã trong email g·ª≠i ƒëi</small>
                                </div>
                            </form>
                        </div>

                        <!-- User Settings Tab -->
                        <div class="tab-pane fade" id="user-settings" role="tabpanel">
                            <form id="userSettingsForm">
                                <h6 class="mb-3">Ch√≠nh s√°ch m·∫≠t kh·∫©u</h6>
                                <div class="mb-3">
                                    <label class="form-label">ƒê·ªô d√†i m·∫≠t kh·∫©u t·ªëi thi·ªÉu</label>
                                    <input type="number" class="form-control" id="minPasswordLength" min="6" max="20"
                                        value="8">
                                    <small class="text-muted">S·ªë k√Ω t·ª± t·ªëi thi·ªÉu cho m·∫≠t kh·∫©u</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian h·∫øt h·∫°n m·∫≠t kh·∫©u (ng√†y)</label>
                                    <input type="number" class="form-control" id="passwordExpiryDays" min="0" max="365"
                                        value="90">
                                    <small class="text-muted">S·ªë ng√†y tr∆∞·ªõc khi y√™u c·∫ßu ƒë·ªïi m·∫≠t kh·∫©u (0 = kh√¥ng h·∫øt
                                        h·∫°n)</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="preventPasswordReuse">
                                    <label class="form-check-label" for="preventPasswordReuse">
                                        NgƒÉn t√°i s·ª≠ d·ª•ng m·∫≠t kh·∫©u c≈©
                                    </label>
                                    <small class="text-muted d-block">Kh√¥ng cho ph√©p s·ª≠ d·ª•ng l·∫°i c√°c m·∫≠t kh·∫©u ƒë√£ d√πng
                                        tr∆∞·ªõc ƒë√≥</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Qu·∫£n l√Ω t√†i kho·∫£n</h6>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="allowStudentRegistration">
                                    <label class="form-check-label" for="allowStudentRegistration">
                                        Cho ph√©p ƒëƒÉng k√Ω h·ªçc sinh t·ª± ƒë·ªông
                                    </label>
                                    <small class="text-muted d-block">H·ªçc sinh c√≥ th·ªÉ t·ª± t·∫°o t√†i kho·∫£n</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="requireEmailVerification">
                                    <label class="form-check-label" for="requireEmailVerification">
                                        Y√™u c·∫ßu x√°c th·ª±c email
                                    </label>
                                    <small class="text-muted d-block">Ng∆∞·ªùi d√πng ph·∫£i x√°c th·ª±c email tr∆∞·ªõc khi ƒëƒÉng
                                        nh·∫≠p</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">S·ªë t√†i kho·∫£n t·ªëi ƒëa m·ªói l·ªõp</label>
                                    <input type="number" class="form-control" id="maxStudentsPerClass" min="1" max="500"
                                        value="50">
                                    <small class="text-muted">Gi·ªõi h·∫°n s·ªë l∆∞·ª£ng h·ªçc sinh trong m·ªôt l·ªõp</small>
                                </div>
                            </form>
                        </div>

                        <!-- System Settings Tab -->
                        <div class="tab-pane fade" id="system-settings" role="tabpanel">
                            <form id="systemSettingsForm">
                                <h6 class="mb-3">C·∫•u h√¨nh h·ªá th·ªëng</h6>
                                <div class="mb-3">
                                    <label class="form-label">S·ªë c√¢u h·ªèi m·ªói trang</label>
                                    <input type="number" class="form-control" id="questionsPerPage" min="5" max="50"
                                        required>
                                    <small class="text-muted">S·ªë c√¢u h·ªèi hi·ªÉn th·ªã tr√™n m·ªói trang khi l√†m b√†i</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">T·ª± ƒë·ªông l∆∞u sau (gi√¢y)</label>
                                    <input type="number" class="form-control" id="autoSaveInterval" min="10" max="300"
                                        required>
                                    <small class="text-muted">T·ª± ƒë·ªông l∆∞u c√¢u tr·∫£ l·ªùi sau m·ªói X gi√¢y</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian l∆∞u log (ng√†y)</label>
                                    <input type="number" class="form-control" id="logRetentionDays" min="7" max="365"
                                        value="30">
                                    <small class="text-muted">S·ªë ng√†y l∆∞u tr·ªØ log h·ªá th·ªëng (t·ª± ƒë·ªông x√≥a log c≈©)</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">T·∫ßn su·∫•t backup t·ª± ƒë·ªông (ng√†y)</label>
                                    <input type="number" class="form-control" id="backupFrequency" min="0" max="30"
                                        value="7">
                                    <small class="text-muted">T·ª± ƒë·ªông backup d·ªØ li·ªáu sau X ng√†y (0 = t·∫Øt)</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableMaintenanceMode">
                                    <label class="form-check-label" for="enableMaintenanceMode">
                                        B·∫≠t ch·∫ø ƒë·ªô b·∫£o tr√¨
                                    </label>
                                    <small class="text-muted d-block">Khi b·∫≠t, ch·ªâ admin m·ªõi truy c·∫≠p ƒë∆∞·ª£c h·ªá
                                        th·ªëng</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableCaching">
                                    <label class="form-check-label" for="enableCaching">
                                        B·∫≠t cache h·ªá th·ªëng
                                    </label>
                                    <small class="text-muted d-block">L∆∞u cache ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô t·∫£i trang</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">M·∫≠t kh·∫©u admin m·∫∑c ƒë·ªãnh (t√πy ch·ªçn)</label>
                                    <input type="password" class="form-control" id="defaultAdminPassword"
                                        autocomplete="new-password">
                                    <small class="text-muted">M·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh cho t√†i kho·∫£n admin m·ªõi (ƒë·ªÉ tr·ªëng ƒë·ªÉ
                                        kh√¥ng thay ƒë·ªïi)</small>
                                </div>
                            </form>
                        </div>

                        <!-- Backup & Restore Settings Tab -->
                        <div class="tab-pane fade" id="backup-settings" role="tabpanel">
                            <form id="backupSettingsForm">
                                <h6 class="mb-3">Sao l∆∞u d·ªØ li·ªáu</h6>
                                <div class="mb-3">
                                    <label class="form-label">L·ªãch sao l∆∞u t·ª± ƒë·ªông</label>
                                    <select class="form-select" id="backupSchedule">
                                        <option value="daily">H√†ng ng√†y</option>
                                        <option value="weekly" selected>H√†ng tu·∫ßn</option>
                                        <option value="monthly">H√†ng th√°ng</option>
                                        <option value="disabled">T·∫Øt</option>
                                    </select>
                                    <small class="text-muted">T·∫ßn su·∫•t sao l∆∞u t·ª± ƒë·ªông</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Gi·ªØ l·∫°i s·ªë b·∫£n sao l∆∞u</label>
                                    <input type="number" class="form-control" id="backupRetention" min="1" max="30"
                                        value="7">
                                    <small class="text-muted">S·ªë b·∫£n sao l∆∞u t·ªëi ƒëa ƒë∆∞·ª£c gi·ªØ l·∫°i (t·ª± ƒë·ªông x√≥a b·∫£n
                                        c≈©)</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="backupIncludeFiles">
                                    <label class="form-check-label" for="backupIncludeFiles">
                                        Bao g·ªìm file ƒë√≠nh k√®m
                                    </label>
                                    <small class="text-muted d-block">Bao g·ªìm c√°c file upload trong b·∫£n sao l∆∞u</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="backupCompress">
                                    <label class="form-check-label" for="backupCompress">
                                        N√©n file sao l∆∞u
                                    </label>
                                    <small class="text-muted d-block">N√©n file ƒë·ªÉ ti·∫øt ki·ªám dung l∆∞·ª£ng</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Thao t√°c sao l∆∞u</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-primary" onclick="createBackup()">
                                        <i class="bi bi-download"></i> T·∫°o b·∫£n sao l∆∞u ngay
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary"
                                        onclick="viewBackupHistory()">
                                        <i class="bi bi-clock-history"></i> Xem l·ªãch s·ª≠ sao l∆∞u
                                    </button>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Kh√¥i ph·ª•c d·ªØ li·ªáu</h6>
                                <div class="mb-3">
                                    <label class="form-label">Ch·ªçn file sao l∆∞u</label>
                                    <input type="file" class="form-control" id="restoreFile" accept=".sql,.zip,.backup">
                                    <small class="text-muted">Ch·ªçn file sao l∆∞u ƒë·ªÉ kh√¥i ph·ª•c</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="restoreOverwrite">
                                    <label class="form-check-label" for="restoreOverwrite">
                                        Ghi ƒë√® d·ªØ li·ªáu hi·ªán t·∫°i
                                    </label>
                                    <small class="text-danger d-block">C·∫£nh b√°o: D·ªØ li·ªáu hi·ªán t·∫°i s·∫Ω b·ªã thay
                                        th·∫ø!</small>
                                </div>
                                <button type="button" class="btn btn-danger" onclick="restoreBackup()">
                                    <i class="bi bi-arrow-counterclockwise"></i> Kh√¥i ph·ª•c t·ª´ file
                                </button>
                            </form>
                        </div>

                        <!-- Logs & Monitoring Settings Tab -->
                        <div class="tab-pane fade" id="logs-settings" role="tabpanel">
                            <form id="logsSettingsForm">
                                <h6 class="mb-3">C·∫•u h√¨nh Log</h6>
                                <div class="mb-3">
                                    <label class="form-label">M·ª©c ƒë·ªô log</label>
                                    <select class="form-select" id="logLevel">
                                        <option value="error">Ch·ªâ l·ªói</option>
                                        <option value="warn">C·∫£nh b√°o</option>
                                        <option value="info" selected>Th√¥ng tin</option>
                                        <option value="debug">Debug (chi ti·∫øt)</option>
                                    </select>
                                    <small class="text-muted">M·ª©c ƒë·ªô chi ti·∫øt c·ªßa log h·ªá th·ªëng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">K√≠ch th∆∞·ªõc file log t·ªëi ƒëa (MB)</label>
                                    <input type="number" class="form-control" id="maxLogFileSize" min="1" max="100"
                                        value="10">
                                    <small class="text-muted">Khi ƒë·∫°t k√≠ch th∆∞·ªõc n√†y, file log s·∫Ω ƒë∆∞·ª£c rotate</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="logUserActions">
                                    <label class="form-check-label" for="logUserActions">
                                        Ghi log h√†nh ƒë·ªông ng∆∞·ªùi d√πng
                                    </label>
                                    <small class="text-muted d-block">Ghi l·∫°i c√°c thao t√°c quan tr·ªçng c·ªßa ng∆∞·ªùi
                                        d√πng</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="logAPIRequests">
                                    <label class="form-check-label" for="logAPIRequests">
                                        Ghi log y√™u c·∫ßu API
                                    </label>
                                    <small class="text-muted d-block">Ghi l·∫°i t·∫•t c·∫£ c√°c y√™u c·∫ßu API</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Gi√°m s√°t h·ªá th·ªëng</h6>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableSystemMonitoring">
                                    <label class="form-check-label" for="enableSystemMonitoring">
                                        B·∫≠t gi√°m s√°t h·ªá th·ªëng
                                    </label>
                                    <small class="text-muted d-block">Theo d√µi hi·ªáu su·∫•t v√† t√†i nguy√™n h·ªá th·ªëng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">T·∫ßn su·∫•t ki·ªÉm tra (ph√∫t)</label>
                                    <input type="number" class="form-control" id="monitoringInterval" min="1" max="60"
                                        value="5">
                                    <small class="text-muted">T·∫ßn su·∫•t ki·ªÉm tra t√†i nguy√™n h·ªá th·ªëng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ng∆∞·ª°ng c·∫£nh b√°o CPU (%)</label>
                                    <input type="number" class="form-control" id="cpuThreshold" min="50" max="100"
                                        value="80">
                                    <small class="text-muted">C·∫£nh b√°o khi CPU v∆∞·ª£t qu√° ng∆∞·ª°ng n√†y</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ng∆∞·ª°ng c·∫£nh b√°o RAM (%)</label>
                                    <input type="number" class="form-control" id="ramThreshold" min="50" max="100"
                                        value="85">
                                    <small class="text-muted">C·∫£nh b√°o khi RAM v∆∞·ª£t qu√° ng∆∞·ª°ng n√†y</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Xem log</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-primary" onclick="viewSystemLogs()">
                                        <i class="bi bi-file-text"></i> Xem log h·ªá th·ªëng
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="exportLogs()">
                                        <i class="bi bi-download"></i> Xu·∫•t log
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" onclick="clearOldLogs()">
                                        <i class="bi bi-trash"></i> X√≥a log c≈©
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- API & Integration Settings Tab -->
                        <div class="tab-pane fade" id="api-settings" role="tabpanel">
                            <form id="apiSettingsForm">
                                <h6 class="mb-3">C·∫•u h√¨nh API</h6>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableAPI">
                                    <label class="form-check-label" for="enableAPI">
                                        B·∫≠t API c√¥ng khai
                                    </label>
                                    <small class="text-muted d-block">Cho ph√©p truy c·∫≠p API t·ª´ b√™n ngo√†i</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">API Key</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="apiKey" readonly>
                                        <button class="btn btn-outline-secondary" type="button"
                                            onclick="generateAPIKey()">
                                            <i class="bi bi-arrow-repeat"></i> T·∫°o m·ªõi
                                        </button>
                                        <button class="btn btn-outline-secondary" type="button" onclick="copyAPIKey()">
                                            <i class="bi bi-clipboard"></i> Sao ch√©p
                                        </button>
                                    </div>
                                    <small class="text-muted">API Key ƒë·ªÉ x√°c th·ª±c c√°c y√™u c·∫ßu API</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Rate limit (y√™u c·∫ßu/ph√∫t)</label>
                                    <input type="number" class="form-control" id="apiRateLimit" min="10" max="1000"
                                        value="100">
                                    <small class="text-muted">Gi·ªõi h·∫°n s·ªë y√™u c·∫ßu API m·ªói ph√∫t</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian h·∫øt h·∫°n token (ph√∫t)</label>
                                    <input type="number" class="form-control" id="apiTokenExpiry" min="5" max="1440"
                                        value="60">
                                    <small class="text-muted">Th·ªùi gian h·∫øt h·∫°n c·ªßa JWT token</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">T√≠ch h·ª£p b√™n th·ª© ba</h6>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableGoogleIntegration">
                                    <label class="form-check-label" for="enableGoogleIntegration">
                                        T√≠ch h·ª£p Google
                                    </label>
                                    <small class="text-muted d-block">Cho ph√©p ƒëƒÉng nh·∫≠p b·∫±ng Google</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Google Client ID</label>
                                    <input type="text" class="form-control" id="googleClientId"
                                        placeholder="your-google-client-id">
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableFacebookIntegration">
                                    <label class="form-check-label" for="enableFacebookIntegration">
                                        T√≠ch h·ª£p Facebook
                                    </label>
                                    <small class="text-muted d-block">Cho ph√©p ƒëƒÉng nh·∫≠p b·∫±ng Facebook</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Facebook App ID</label>
                                    <input type="text" class="form-control" id="facebookAppId"
                                        placeholder="your-facebook-app-id">
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Webhook</h6>
                                <div class="mb-3">
                                    <label class="form-label">Webhook URL</label>
                                    <input type="url" class="form-control" id="webhookUrl"
                                        placeholder="https://example.com/webhook">
                                    <small class="text-muted">URL ƒë·ªÉ g·ª≠i th√¥ng b√°o s·ª± ki·ªán</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="webhookOnExamStart">
                                    <label class="form-check-label" for="webhookOnExamStart">
                                        G·ª≠i webhook khi k·ª≥ thi b·∫Øt ƒë·∫ßu
                                    </label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="webhookOnExamEnd">
                                    <label class="form-check-label" for="webhookOnExamEnd">
                                        G·ª≠i webhook khi k·ª≥ thi k·∫øt th√∫c
                                    </label>
                                </div>
                            </form>
                        </div>

                        <!-- Performance Settings Tab -->
                        <div class="tab-pane fade" id="performance-settings" role="tabpanel">
                            <form id="performanceSettingsForm">
                                <h6 class="mb-3">T·ªëi ∆∞u hi·ªáu su·∫•t</h6>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableCDN">
                                    <label class="form-check-label" for="enableCDN">
                                        S·ª≠ d·ª•ng CDN
                                    </label>
                                    <small class="text-muted d-block">S·ª≠ d·ª•ng Content Delivery Network ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô
                                        t·∫£i</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">CDN URL</label>
                                    <input type="url" class="form-control" id="cdnUrl"
                                        placeholder="https://cdn.example.com">
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableGzip">
                                    <label class="form-check-label" for="enableGzip">
                                        N√©n Gzip
                                    </label>
                                    <small class="text-muted d-block">N√©n response ƒë·ªÉ gi·∫£m bƒÉng th√¥ng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian cache (gi√¢y)</label>
                                    <input type="number" class="form-control" id="cacheDuration" min="0" max="86400"
                                        value="3600">
                                    <small class="text-muted">Th·ªùi gian cache cho static files (0 = kh√¥ng cache)</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">T·ªëi ∆∞u database</h6>
                                <div class="mb-3">
                                    <label class="form-label">K√≠ch th∆∞·ªõc connection pool</label>
                                    <input type="number" class="form-control" id="dbPoolSize" min="5" max="50"
                                        value="10">
                                    <small class="text-muted">S·ªë k·∫øt n·ªëi database t·ªëi ƒëa</small>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableQueryCache">
                                    <label class="form-check-label" for="enableQueryCache">
                                        B·∫≠t cache truy v·∫•n
                                    </label>
                                    <small class="text-muted d-block">Cache k·∫øt qu·∫£ truy v·∫•n th∆∞·ªùng d√πng</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Th·ªùi gian cache truy v·∫•n (gi√¢y)</label>
                                    <input type="number" class="form-control" id="queryCacheDuration" min="60"
                                        max="3600" value="300">
                                    <small class="text-muted">Th·ªùi gian cache k·∫øt qu·∫£ truy v·∫•n</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">T·ªëi ∆∞u h√¨nh ·∫£nh</h6>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableImageOptimization">
                                    <label class="form-check-label" for="enableImageOptimization">
                                        T·ª± ƒë·ªông t·ªëi ∆∞u h√¨nh ·∫£nh
                                    </label>
                                    <small class="text-muted d-block">T·ª± ƒë·ªông n√©n v√† resize h√¨nh ·∫£nh khi upload</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">K√≠ch th∆∞·ªõc h√¨nh ·∫£nh t·ªëi ƒëa (MB)</label>
                                    <input type="number" class="form-control" id="maxImageSize" min="1" max="10"
                                        value="5">
                                    <small class="text-muted">K√≠ch th∆∞·ªõc file h√¨nh ·∫£nh t·ªëi ƒëa khi upload</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ch·∫•t l∆∞·ª£ng n√©n h√¨nh ·∫£nh (%)</label>
                                    <input type="number" class="form-control" id="imageQuality" min="50" max="100"
                                        value="80">
                                    <small class="text-muted">Ch·∫•t l∆∞·ª£ng h√¨nh ·∫£nh sau khi n√©n</small>
                                </div>
                                <hr class="my-4">
                                <h6 class="mb-3">Th·ªëng k√™ hi·ªáu su·∫•t</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-info" onclick="viewPerformanceStats()">
                                        <i class="bi bi-graph-up"></i> Xem th·ªëng k√™ hi·ªáu su·∫•t
                                    </button>
                                    <button type="button" class="btn btn-outline-warning" onclick="clearCache()">
                                        <i class="bi bi-arrow-clockwise"></i> X√≥a cache
                                    </button>
                                    <button type="button" class="btn btn-outline-primary" onclick="optimizeDatabase()">
                                        <i class="bi bi-tools"></i> T·ªëi ∆∞u database
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="mt-4 d-flex justify-content-end gap-2">
                        <button class="btn btn-secondary" id="resetSettingsBtn">ƒê·∫∑t l·∫°i m·∫∑c ƒë·ªãnh</button>
                        <button class="btn btn-primary" id="saveSettingsBtn">
                            <i class="bi bi-save"></i> L∆∞u c√†i ƒë·∫∑t
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Th√™m Ng∆∞·ªùi D√πng -->
    <div class="modal fade" id="addUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Th√™m Ng∆∞·ªùi D√πng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addUserForm">
                        <div class="mb-3">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-control" id="userUsername" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">H·ªç v√† T√™n</label>
                            <input type="text" class="form-control" id="userFullName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="userEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">M·∫≠t kh·∫©u</label>
                            <input type="password" class="form-control" id="userPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Vai tr√≤</label>
                            <select class="form-select" id="userRole">
                                <option value="Student">Sinh vi√™n</option>
                                <option value="Teacher">Gi√°o vi√™n</option>
                                <option value="Admin">Qu·∫£n tr·ªã vi√™n</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" id="saveUserBtn">L∆∞u</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Th√™m M√¥n H·ªçc -->
    <div class="modal fade" id="addSubjectModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Th√™m M√¥n H·ªçc</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addSubjectForm">
                        <div class="mb-3">
                            <label class="form-label">T√™n m√¥n h·ªçc</label>
                            <input type="text" class="form-control" id="subjectName" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" id="saveSubjectBtn">L∆∞u</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Th√™m K·ª≥ Thi -->
    <div class="modal fade" id="addExamModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">T·∫°o K·ª≥ Thi M·ªõi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addExamForm">
                        <div class="mb-3">
                            <label class="form-label">T√™n k·ª≥ thi <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="examName" required
                                placeholder="VD: Ki·ªÉm tra gi·ªØa k·ª≥ - M√¥n h·ªçc">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">M√¥n h·ªçc <span class="text-danger">*</span></label>
                            <select class="form-select" id="examSubjectId" required>
                                <option value="">Ch·ªçn m√¥n h·ªçc</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Gi√°o vi√™n (t√πy ch·ªçn)</label>
                            <select class="form-select" id="examTeacherId">
                                <option value="">T·ª± ƒë·ªông g√°n (Admin hi·ªán t·∫°i)</option>
                            </select>
                            <small class="text-muted">N·∫øu kh√¥ng ch·ªçn, s·∫Ω t·ª± ƒë·ªông g√°n cho admin hi·ªán t·∫°i</small>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Th·ªùi gian l√†m b√†i (ph√∫t) <span
                                    class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="examDuration" required min="1"
                                placeholder="VD: 60">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" id="saveExamBtn">L∆∞u</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Xem Chi Ti·∫øt K·ª≥ Thi -->
    <div class="modal fade" id="viewExamModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi Ti·∫øt K·ª≥ Thi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="examDetailContent">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">ƒêang t·∫£i...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Xem Chi Ti·∫øt Ng∆∞·ªùi D√πng -->
    <div class="modal fade" id="viewUserModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi Ti·∫øt Ng∆∞·ªùi D√πng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="userDetailContent">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">ƒêang t·∫£i...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Xem Chi Ti·∫øt ƒêi·ªÉm S·ªë H·ªçc Sinh -->
    <div class="modal fade" id="viewStudentScoresModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi Ti·∫øt ƒêi·ªÉm S·ªë H·ªçc Sinh</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="studentScoresContent">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">ƒêang t·∫£i...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/client/public/js/config.js"></script>
    <script src="/client/public/js/api.js"></script>
    <script src="/client/public/js/admin.js"></script>
    <script src="/client/public/js/scroll-to-top.js"></script>
</body>

</html>